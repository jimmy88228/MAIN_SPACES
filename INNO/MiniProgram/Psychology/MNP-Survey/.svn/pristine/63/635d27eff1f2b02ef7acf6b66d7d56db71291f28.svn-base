<template>
  <view class="h5-box flex-c-s">
    <view class="box flex-s-s flex-col">
      <view class="header font-14 flex-b-c">
        <view class="msg flex-s-c">
          <image class="login-logo" src="/static/logo.png" mode="aspectFit"></image>
          <view v-for="(item) in msgList" :key="item.key" class="flex-c-c item" >
            <view class="C_7f font-20 p-r-10">{{item.title || ""}}</view>
            <view class="content C_7f font-22">{{studentInfo[item.key] || ""}}</view>
          </view>
        </view>
        <button class="logout C_7f font-20 flex-c-c" @click="logout">退出登录</button>
      </view>
      <view class="body flex1">
        <slot name="body"></slot>
      </view>
    </view>
  </view>
</template>

<script>
	const app = getApp();
  export default {
    data() {
      return {
				msgList: [
          {
						title: "姓名",
						key: "name"
					},{
						title: "学号",
						key: "studentNumber"
					},
					{
						title: "班级",
						key: "classFullName"
					}
				],
      }
    },
    computed: {
      studentInfo() {
        console.log('studentInfo',app.IM.bsnUserInfo);
        return app.IM.bsnUserInfo||{}
      }
    },
    methods: {
      logout() {
        app.LM.logout();
        app.LM.logout('bsnUserToken');
        uni.reLaunch({
          url:`/pages/startup/startup?id=${app.PM.getParams('initId')||0}`
        })
      }
    },
  }
</script>

<style lang="scss" scoped>
.h5-box{
  background-color: #F0F6EE;
  height: 100vh;
  overflow: scroll;
  .box{
    max-width: 920px;
    height: 100%;
    .header{
      background: #fff;
      border-radius: 12px;
      padding:0 15px;
      box-sizing: border-box;
      margin-bottom: 20px;
      margin-top: 20px;
    }
    .login-logo{
      width: 60px;
      height: 60px;
      margin-right: 25px;
    }
    .body{
      background: #fff;
      overflow: scroll;
      border-radius: 20px;
      margin-bottom: 20px;
    }
    .item{
      min-width: 180px;
      border-right: 1px solid #979797;
      &:nth-child(3n){
        min-width: 200px;
      }
      .content {
        word-break: break-all;
        font-family: PingFangSC-Medium;
      }

      &:last-child {
        border-right: none;
      }
    }
    .logout{
      width: 80px;
      height: 36px;
      background: #FAFAFA;
      border-radius: 6px;
    }
  }
}
</style>