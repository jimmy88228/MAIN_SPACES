<template>
	<view class="user">
		<custom-page :userInfo="userInfo" :authUserInfo="authUserInfo" :hold-nav="true" nav-mode="None" ref="customPageRef" :isShowSupport="true"></custom-page>
	</view>
</template>

<script>
	const app = getApp();
	const pageOption = Page.BasePage({
		data() {
			return {
				imgUser:'',
				userInfo: {},
				authUserInfo: {}
			}
		},
		// onShareAppMessage(e){},
		methods: {
			reFreshInfo(){
				this._getAuthUserInfo().then(res=>{
					this.authUserInfo = res;
				})
				this._getBsnUserInfo().then(res=>{
					this.userInfo = res;
				})
			},
			getMinePageDetail(){
				return this.$Http(this.$Apis.getMinePageDetail,{
				  other:{
				    isShowLoad: true
				  }
				}).then(res=>{
				  if(res.code == 1){
				    let data = res.data || {};
				    this.$refs["customPageRef"].initData(data);
				  }
				})
			}
		},
		onShow(){
			this._checkLogin().then(()=>{
				this.reFreshInfo();
			})
			this.getMinePageDetail();
		},
	})
	export default pageOption 
</script>

<style lang="scss" scoped>
</style>
