<template>
  <view class="work-bench-detail">
    <page-nav>
      <template slot="title">
        <view class="bench-title">
          <view class="font-26 clamp">质检部</view>
          <view class="font-18 C_7f clamp">…技术部/海关总队</view>
        </view>
      </template>
    </page-nav>
    <view class="bench-top-area flex-s-c">
      <view class="bench-top-item" @click="turnPage" data-mode="caring-staff">
        <image :src="caringStaffIcon" mode="widthFix" />
        <view class="C_7f font-22">
          关爱人员
        </view>
      </view>
      <view class="bench-top-item" @click="turnPage" data-mode="reserve-supervise-list">
        <image :src="reserveSuperviseIcon" mode="widthFix" />
        <view class="C_7f font-22">
          预约督导
        </view>
      </view>
      <view class="bench-top-item" @click="turnPage" data-mode="psychologyBook">
        <image :src="psychologyBookIcon" mode="widthFix" />
        <view class="C_7f font-22">
          心理手册
        </view>
      </view>
    </view>
    <view class="eval-list">
      <view class="eval-item bg_fff" v-for="(item,i) in evalList" :key="i">
        <view class="flex-s-c eval-item-title">
          <view class="C_7f font-22">量表测评</view>
          <view v-if="item.status != 2" class="eval-status flex-c-c">{{checkStatus(item.status)}}</view>
          <view v-else class="eval-status eval-status-finish flex-c-c">{{checkStatus(item.status)}}</view>
        </view>
        <view class="eval-detail">
          <view class="eval-detail-title flex-b-c">
            <view class="flex-s-c flex1">
              <image class="eval-icon f-shrink-0" :src="testIcon" mode="widthFix" />
              <view class="flex1 clamp">
                <view class="font-26 m-b-10 flex1 clamp">{{item.evalName}}</view>
                <view class="font-18 C_B2 flex1 clamp" v-if="item.status == 0">活动开始日期 {{item.startTime}}</view>
                <view class="font-18 C_B2 flex1 clamp" v-else>{{item.endTime}}截止</view>
              </view>
            </view>
            <view class="activity-code">
              <image :src="blueCodeIcon" mode="widthFix" />
              <view class="font-20 C_7f">活动码</view>
            </view>
          </view>
          <view class="count-group flex-a-c" v-if="item.status != 0">
            <view class="count-item">
              <view class="font-22 C_7f">应收测评</view>
              <view class="font-44 C_008acb">{{item.allCount}}</view>
            </view>
            <view class="count-item">
              <view class="font-22 C_7f">待收测评</view>
              <view class="font-44 C_008acb">{{item.peddingCount}}</view>
            </view>
            <view class="count-item">
              <view class="font-22 C_7f">风险预警</view>
              <view class="font-44 C_008acb">{{item.riskCount}}</view>
            </view>
          </view>
          <view class="split" v-if="item.status != 0"></view>
          <view class="eval-button flex-b-c" v-if="item.status != 0">
            <view class="flex-c-c">
              <image :src="bgreyCodeIcon" mode="widthFix" />
              <view class="font-22 C_7f">生成活动码</view>
            </view>
            <view class="flex-c-c" @click="participation">
              <image :src="participationIcon" mode="widthFix" />
              <view class="font-22 C_7f">参与情况</view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</template>

<script>
  const app = getApp();
  const pageOption = Page.BasePage({
    data() {
      return {
        testIcon: require("@/static/activity-icon.jpg"),
        caringStaffIcon: require("@/static/caring-staff.png"),
        reserveSuperviseIcon: require("@/static/reserve-supervise.png"),
        psychologyBookIcon: require("@/static/psychology-book.png"),
        blueCodeIcon: require("@/static/blue-code.png"),
        bgreyCodeIcon: require("@/static/grey-code.png"),
        participationIcon: require("@/static/participation.png"),
        evalList: [{
            evalName: "广州海关心理健康测评",
            startTime: '2022-03-30',
            endTime: '2022-04-30',
            allCount: "32",
            peddingCount: "3",
            riskCount: "1",
            status: 0
          },
          {
            evalName: "广州海关心理健康测评",
            startTime: '2022-03-30',
            endTime: '2022-04-30',
            allCount: "32",
            peddingCount: "3",
            riskCount: "1",
            status: 1
          },
          {
            evalName: "广州海关心理健康测评",
            startTime: '2022-03-30',
            endTime: '2022-04-30',
            allCount: "32",
            peddingCount: "3",
            riskCount: "1",
            status: 2
          },
        ]
      }
    },
    // onShareAppMessage(e){},
    methods: {
      checkStatus(status) {
        let tips = ""
        switch (status) {
          case 0:
            tips = "待开始";
            break
          case 1:
            tips = "进行中"
            break
          case 2:
            tips = "已结束";
            break
          default:
            break
        }
        return tips
      },
      participation() {
        this.jumpAction("/pages/work-bench/participation/participation")
      },
      turnPage({currentTarget}){
        let mode = currentTarget.dataset.mode;
        this.jumpAction(`/pages/work-bench/${mode}/${mode}`)
      }
    },
    onShow() {

    },
    onReady() {

    }
  })
  export default pageOption
</script>

<style lang="scss" scoped>
  .work-bench-detail {
    min-height: 100vh;
    background-color: #F7F7F7;

    .bench-title {
      text-align: center;
    }

    .bench-top-area {
      padding: 33rpx 36rpx;
      background-color: #FFFFFF;

      .bench-top-item {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-right: 68rpx;

        &>image {
          width: 80rpx;
          height: 80rpx;
          background: #ECB8A0;
          border-radius: 12rpx;
          margin-bottom: 16rpx;
        }
      }
    }

    .eval-list {
      padding: 22rpx;

      .eval-item {
        border-radius: 22rpx;
        margin-bottom: 16rpx;

        .eval-item-title {
          padding: 32rpx 32rpx 0rpx;

          .eval-status {
            margin-left: 13rpx;
            color: #0083CE;
            font-size: 17rpx;
            width: 64rpx;
            height: 24rpx;
            background: rgba($color: #E7F7FF, $alpha: 0.6);
            border-radius: 4rpx;
            opacity: 0.6;
            border: 1px solid rgba($color: #0083CE, $alpha: 0.6);
          }

          .eval-status-finish {
            color: #9E9E9E !important;
            background: rgba($color: #F1F1F1, $alpha: 0.6) !important;
            border: 1px solid rgba($color: #B2B2B2, $alpha: 0.6) !important;
          }
        }


        .eval-detail {
          .eval-detail-title {
            padding: 0 32rpx 32rpx;

            &>view:first-child {
              overflow: hidden;
              text-overflow: ellipsis;
              white-space: nowrap;
            }

            .eval-icon {
              width: 61rpx;
              height: 61rpx;
              border-radius: 8rpx;
              margin-right: 16rpx;
            }

            .activity-code {
              border-left: 2rpx solid #EFEFEF;
              padding-left: 44rpx;

              &>image {
                width: 55rpx;
                height: 55rpx;
                border-radius: 50%;
                margin-bottom: 16rpx;
              }
            }

          }

          .count-group {
            padding: 0 32rpx 32rpx;

            .count-item {
              width: 200rpx;
              height: 150rpx;
              background: #FAFAFA;
              border-radius: 22rpx;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
            }
          }

          .split {
            height: 2rpx;
            width: 100%;
            background-color: rgba($color: #979797, $alpha: 0.2);
          }

          .eval-button {
            &>view {
              width: 50%;
              box-sizing: border-box;
              margin: 32rpx 0;

              &>image {
                width: 26rpx;
                height: 26rpx;
                margin-right: 10rpx;
              }
            }

            &>view:first-child {
              border-right: 2rpx solid rgba($color: #979797, $alpha: 0.3);
            }
          }
        }
      }
    }

  }
</style>