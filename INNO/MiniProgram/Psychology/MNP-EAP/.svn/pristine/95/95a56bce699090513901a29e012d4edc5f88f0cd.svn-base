<template>
  <view>
    <view class="tutor-resume-page">
      <page-nav :isTransparent="true" full="false"></page-nav>
      <view class="user-avatar-info-area" @click="previewImage">
        <view class="user-avatar-info" :style="{ 'background-image': `url(${tutorInfo.profilePicture})` }">
        </view>
        <image class="user-avatar" :src="tutorInfo.profilePicture" mode="scaleToFill" />
      </view>
      <view class="user-info" v-if="!!tutorInfo">
        <view class="user-info-top">
          <view class="m-b-40 flex-s-c">
            <view class="font-38 bold m-r-20 f-shrink-0">{{ tutorInfo.name?tutorInfo.name:"" }}</view>
            <view class="font-24 C_7f p-t-15 clamp">{{ tutorInfo.qualification?tutorInfo.qualification:"" }}</view>
          </view>
          <view class="m-r-25 C_B2 m-b-20">擅长领域</view>
          <view class="flex f-wrap good-at" v-if="tutorInfo.fields">
            <view style="margin: 5rpx 10rpx 5rpx 0px;" class="good-at-item" v-for="(item, i) in tutorInfo.fields"
              :key="i">
              {{ item }}
            </view>
          </view>
        </view>
        <view class="split"></view>
        <view class="user-info-bottom">
          <view class="user-info-item flex flex-b-s" v-for="(detailItem,detailIndex) in tutorInfo.detailList"
            :key="detailIndex">
            <view class="user-info-title C_7f font-28"> {{detailItem.title?detailItem.title:""}} </view>
            <view class="user-info-detail C_7f font-28">
              <text user-select>
                {{ detailItem.info?detailItem.info:"" }}
              </text>
            </view>
          </view>
        </view>
      </view>
    </view>
    <view class="bottom-area flex flex-c-c">
      <view class="bottom-button flex flex-c-c C_fff font-30 bold" @click="reserve">预约咨询</view>
    </view>
  </view>
</template>

<script>
  const app = getApp();
  const pageOption = Page.BasePage({
    data() {
      return {
        options: {},
        value: "",
        tutorInfo: {},
      };
    },
    onLoad(options) {
      this.options = options;
    },
    onReady() {
      this.loadData();
    },
    methods: {
      loadData() {
        this.$Http(this.$Apis.getConsultantById, {
          data: {
            id: this.options.consultantId || 0,
          },
        }).then((res) => {
          this.tutorInfo = res.data
        });
      },
      reserve() {
        let consultantId = this.options.consultantId;
        this.jumpAction(`/pages/psychology/reserve/reserve?consultantId=${consultantId}`);
      },
      previewImage() {
        let imageList = []
        imageList.push(this.tutorInfo.profilePicture)
        uni.previewImage({
          urls: imageList,
          longPressActions: {
            itemList: ['发送给朋友', '保存图片', '收藏']
          }
        });
      }
    },
    onUnload() {},
    onShow() {},
  });
  export default pageOption;
</script>

<style lang="scss" scoped>
  .tutor-resume-page {
    width: 100%;
    min-height: 100vh;
    position: relative;

    .user-avatar-info-area {
      position: sticky;
      top: constant(safe-area-inset-top);
      top: env(safe-area-inset-top);

      .user-avatar-info {
        width: 100%;
        height: 421rpx;
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center center;
        background-color: #EFEFEF;
        position: fixed;
        filter: blur(100px);
        z-index: -1;
      }

      .user-avatar {
        margin: 0 auto;
        background-color: #EFEFEF;
        width: 400rpx;
        height: 400rpx;
      }
    }

    .user-info {
      position: relative;
      min-height: calc(100vh - 421rpx + constant(safe-area-inset-top));
      min-height: calc(100vh - 421rpx + env(safe-area-inset-top));
      width: 100%;
      background: #ffffff;
      border-radius: 21rpx 21rpx 0 0;

      .user-info-top {
        padding: 40rpx;
      }

      .good-at {
        // padding: 0rpx 24rpx 23rpx 24rpx;

        .good-at-item {
          margin: 18rpx 8rpx 0rpx 8rpx;
          padding: 5rpx 12rpx;
          background: rgba($color: #d0fcff, $alpha: 0.2);
          border-radius: 33rpx;
          color: #229FE7;
          margin-right: 8rpx;
          font-size: 18rpx;
          border: 2rpx solid rgba($color: #07C5EF, $alpha: 0.2);
        }
      }

      .split {
        height: 20rpx;
        width: 100%;
        background: #f8f8f8;
      }

      .user-info-bottom {
        padding-bottom: 240rpx;
      }

      .user-info-item {
        position: relative;
        padding: 43rpx 53rpx 38rpx 0;

        .user-info-title {
          border-left: 8rpx solid #008acb;
          padding-left: 47rpx;
        }

        .user-info-detail {
          width: 486rpx;
        }
      }

      .user-info-item::after {
        content: "";
        height: 1px;
        width: 645rpx;
        position: absolute;
        box-sizing: border-box;
        display: block;
        bottom: 0;
        margin: 0 50rpx;
        background: #dddddd;
      }

      .user-info-item:last-child::after {
        content: "";
        background: transparent;
      }
    }
  }

  .bottom-area {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    width: 750rpx;
    height: 140rpx;
    background: #ffffff;
    box-sizing: border-box;

    .bottom-button {
      width: 660rpx;
      height: 100rpx;
      background: #06509b;
      border-radius: 16rpx;
    }
  }
</style>